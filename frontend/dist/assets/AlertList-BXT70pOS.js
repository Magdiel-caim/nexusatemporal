import{j as r}from"./data-vendor-DkslvP0H.js";import{r as a}from"./react-vendor-C5Agepg6.js";import{S as f,M as l}from"./index-wz29yTKh.js";import{z as t,d as v,a5 as N}from"./ui-vendor-DYrPCkCs.js";function C({refreshKey:u,onRefresh:c}){const[i,x]=a.useState([]),[g,d]=a.useState(!0),[o,h]=a.useState(f.ACTIVE);a.useEffect(()=>{p()},[u,o]);const p=async()=>{try{d(!0);const e=await l.getAlerts({status:o||void 0,limit:100});x(e.data||[])}catch(e){console.error("Erro ao carregar alertas:",e),t.error("Erro ao carregar alertas")}finally{d(!1)}},b=async e=>{const s=prompt("Digite a resolução do alerta:");if(s)try{await l.resolveAlert(e.id,s),t.success("Alerta resolvido com sucesso!"),c()}catch{t.error("Erro ao resolver alerta")}},y=async e=>{if(confirm("Tem certeza que deseja ignorar este alerta?"))try{await l.ignoreAlert(e.id),t.success("Alerta ignorado"),c()}catch{t.error("Erro ao ignorar alerta")}},j=e=>{switch(e){case"LOW_STOCK":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"OUT_OF_STOCK":return"bg-red-100 text-red-800 border-red-200";case"EXPIRING_SOON":return"bg-orange-100 text-orange-800 border-orange-200";case"EXPIRED":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}};return g?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 border border-gray-100",children:r.jsxs("select",{value:o,onChange:e=>h(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 bg-white",children:[r.jsx("option",{value:"",children:"Todos os status"}),r.jsx("option",{value:"ACTIVE",children:"Ativos"}),r.jsx("option",{value:"RESOLVED",children:"Resolvidos"}),r.jsx("option",{value:"IGNORED",children:"Ignorados"})]})}),i.length===0?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 border border-gray-100 text-center",children:[r.jsx(v,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum alerta encontrado"}),r.jsx("p",{className:"text-gray-600",children:"Todos os itens estão dentro dos parâmetros normais"})]}):r.jsx("div",{className:"space-y-3",children:i.map(e=>{var s,n,m;return r.jsx("div",{className:`rounded-xl shadow-sm p-6 border-2 ${j(e.type)}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx(N,{className:"h-5 w-5"}),r.jsx("h3",{className:"font-bold text-lg",children:(s=e.product)==null?void 0:s.name}),r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-white bg-opacity-50",children:e.type.replace("_"," ")})]}),r.jsx("p",{className:"text-sm mb-3",children:e.message}),e.currentStock!==void 0&&r.jsxs("p",{className:"text-sm font-medium",children:["Estoque atual: ",e.currentStock," ",(n=e.product)==null?void 0:n.unit,e.minimumStock&&` • Mínimo: ${e.minimumStock} ${(m=e.product)==null?void 0:m.unit}`]}),r.jsxs("p",{className:"text-xs mt-2 opacity-75",children:["Criado em: ",new Date(e.createdAt).toLocaleString("pt-BR")]})]}),e.status==="ACTIVE"&&r.jsxs("div",{className:"flex space-x-2 ml-4",children:[r.jsx("button",{onClick:()=>b(e),className:"px-3 py-1 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors",children:"Resolver"}),r.jsx("button",{onClick:()=>y(e),className:"px-3 py-1 bg-gray-600 text-white text-sm rounded-lg hover:bg-gray-700 transition-colors",children:"Ignorar"})]})]})},e.id)})})]})}export{C as default};
