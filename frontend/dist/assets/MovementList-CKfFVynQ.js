import{j as e}from"./data-vendor-DkslvP0H.js";import{r as s}from"./react-vendor-C5Agepg6.js";import{M as D}from"./index-wz29yTKh.js";import{z as g,n as E,h as A,ae as C,af as O}from"./ui-vendor-DYrPCkCs.js";function k({refreshKey:j}){const[y,f]=s.useState([]),[b,i]=s.useState(!0),[l,n]=s.useState(""),[o,d]=s.useState(""),[r,c]=s.useState(""),[a,x]=s.useState(""),[p,N]=s.useState(!1);s.useEffect(()=>{u()},[j,l,o]);const u=async()=>{try{i(!0);const t=await D.getMovements({limit:100,type:l||void 0,reason:o||void 0,startDate:r||void 0,endDate:a||void 0});f(t.data||[])}catch(t){console.error("Erro ao carregar movimentações:",t),g.error("Erro ao carregar movimentações")}finally{i(!1)}},v=()=>{r&&a?u():(r||a)&&g.error("Preencha ambas as datas")},w=()=>{n(""),d(""),c(""),x("")};return b?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("button",{onClick:()=>N(!p),className:"flex items-center space-x-2 text-gray-700 hover:text-gray-900",children:[e.jsx(E,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Filtros"})]}),(l||o||r||a)&&e.jsx("button",{onClick:w,className:"text-sm text-red-600 hover:text-red-700",children:"Limpar filtros"})]}),p&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),e.jsxs("select",{value:l,onChange:t=>n(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 bg-white",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"ENTRADA",children:"Entrada"}),e.jsx("option",{value:"SAIDA",children:"Saída"}),e.jsx("option",{value:"AJUSTE",children:"Ajuste"}),e.jsx("option",{value:"DEVOLUCAO",children:"Devolução"}),e.jsx("option",{value:"PERDA",children:"Perda"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo"}),e.jsxs("select",{value:o,onChange:t=>d(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 bg-white",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"COMPRA",children:"Compra"}),e.jsx("option",{value:"PROCEDIMENTO",children:"Procedimento"}),e.jsx("option",{value:"VENDA",children:"Venda"}),e.jsx("option",{value:"AJUSTE_INVENTARIO",children:"Ajuste de Inventário"}),e.jsx("option",{value:"DEVOLUCAO_FORNECEDOR",children:"Devolução Fornecedor"}),e.jsx("option",{value:"DEVOLUCAO_CLIENTE",children:"Devolução Cliente"}),e.jsx("option",{value:"PERDA",children:"Perda"}),e.jsx("option",{value:"VENCIMENTO",children:"Vencimento"}),e.jsx("option",{value:"DANO",children:"Dano"}),e.jsx("option",{value:"OUTRO",children:"Outro"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Inicial"}),e.jsx("input",{type:"date",value:r,onChange:t=>c(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Final"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",value:a,onChange:t=>x(t.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 bg-white"}),e.jsx("button",{onClick:v,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:e.jsx(A,{className:"h-5 w-5"})})]})]})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Data"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Produto"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Motivo"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Quantidade"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Estoque"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:y.map(t=>{var h,m;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(t.createdAt).toLocaleString("pt-BR")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:((h=t.product)==null?void 0:h.name)||"Produto não encontrado"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs font-medium rounded-full ${t.type==="ENTRADA"||t.type==="DEVOLUCAO"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[t.type==="ENTRADA"||t.type==="DEVOLUCAO"?e.jsx(C,{className:"h-3 w-3 mr-1"}):e.jsx(O,{className:"h-3 w-3 mr-1"}),t.type]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.reason}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-gray-900",children:[t.quantity," ",(m=t.product)==null?void 0:m.unit]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-500",children:[t.previousStock," → ",t.newStock]})]},t.id)})})]})})})]})}export{k as default};
