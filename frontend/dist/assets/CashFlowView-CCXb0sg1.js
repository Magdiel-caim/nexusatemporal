import{j as e}from"./data-vendor-CPXAi296.js";import{r as l}from"./react-vendor-B1IcTyqJ.js";import{g as E,f as b,b as W,c as O}from"./index-C912A6CL.js";import{c as X,b9 as I,C as D,ba as V,R as q,as as z,ar as L,D as F,g as H,h as $,ap as c,t as G,u as J,ag as K}from"./ui-vendor-CGldjw86.js";function Q(){const[r,m]=l.useState(null),[R,w]=l.useState(!0),[S,p]=l.useState(!1),[M,h]=l.useState(!1),[y,j]=l.useState(!1),[s,i]=l.useState(!1),[x,C]=l.useState("0"),[n,o]=l.useState({cashAmount:0,pixAmount:0,creditCardAmount:0,debitCardAmount:0,transferAmount:0,otherAmount:0,notes:""}),[f,N]=l.useState("0"),[k,v]=l.useState("");l.useEffect(()=>{T()},[]);const T=async()=>{var t;try{w(!0);const d=E(),U=await b.getCashFlowByDate(d);m(U)}catch(d){((t=d.response)==null?void 0:t.status)===404?m(null):console.error("Erro ao carregar caixa:",d)}finally{w(!1)}},A=async()=>{try{const t=E(),d=await b.openCashFlow({date:t,openingBalance:Number(x)});m(d),p(!1),c.success("Caixa aberto com sucesso!")}catch(t){c.error("Erro ao abrir caixa: "+t.message)}},a=async()=>{if(r)try{const t=n.cashAmount+n.pixAmount+n.creditCardAmount+n.debitCardAmount+n.transferAmount+n.otherAmount,d=await b.closeCashFlow(r.id,{...n,closingBalance:t});m(d),h(!1),c.success("Caixa fechado com sucesso!")}catch(t){c.error("Erro ao fechar caixa: "+t.message)}},u=async()=>{if(r)try{const t=await b.recordWithdrawal(r.id,Number(f),k||void 0);m(t),j(!1),N("0"),v(""),c.success("Sangria registrada com sucesso!")}catch(t){c.error("Erro ao registrar sangria: "+t.message)}},B=async()=>{if(r)try{const t=await b.recordDeposit(r.id,Number(f),k||void 0);m(t),i(!1),N("0"),v(""),c.success("Reforço registrado com sucesso!")}catch(t){c.error("Erro ao registrar reforço: "+t.message)}},P=async()=>{if(r)try{const t=E(),d=await b.updateCashFlowFromTransactions(t);m(d),c.success("Caixa atualizado com transações!")}catch(t){c.error("Erro ao atualizar: "+t.message)}},g=t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t);return R?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):r?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-lg bg-blue-100 dark:bg-blue-900",children:e.jsx(D,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Caixa do Dia - ",W(r.date)]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.isClosed?e.jsxs("span",{className:"inline-flex items-center text-red-600",children:[e.jsx(V,{className:"w-4 h-4 mr-1"}),"Fechado em ",O(r.closedAt)]}):e.jsxs("span",{className:"inline-flex items-center text-green-600",children:[e.jsx(I,{className:"w-4 h-4 mr-1"}),"Aberto desde ",O(r.openedAt||r.createdAt)]})})]})]}),!r.isClosed&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:P,className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700",title:"Atualizar com transações",children:e.jsx(q,{className:"w-4 h-4"})}),e.jsxs("button",{onClick:()=>j(!0),className:"inline-flex items-center px-3 py-2 border border-orange-300 rounded-md text-sm font-medium text-orange-700 bg-white hover:bg-orange-50",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Sangria"]}),e.jsxs("button",{onClick:()=>i(!0),className:"inline-flex items-center px-3 py-2 border border-green-300 rounded-md text-sm font-medium text-green-700 bg-white hover:bg-green-50",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Reforço"]}),e.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-md text-sm font-medium hover:bg-red-700",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Fechar Caixa"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Saldo Inicial"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:g(r.openingBalance)})]}),e.jsx(F,{className:"w-8 h-8 text-gray-400"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Receitas"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:g(r.totalIncome)})]}),e.jsx(H,{className:"w-8 h-8 text-green-600"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Despesas"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:g(r.totalExpense)})]}),e.jsx($,{className:"w-8 h-8 text-red-600"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Saldo Final"}),e.jsx("p",{className:`text-2xl font-bold ${r.closingBalance>=0?"text-green-600":"text-red-600"}`,children:g(r.closingBalance)})]}),e.jsx(F,{className:"w-8 h-8 text-blue-600"})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Detalhamento por Forma de Pagamento"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Dinheiro"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:g(r.cashAmount)})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"PIX"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:g(r.pixAmount)})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Cartão Crédito"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:g(r.creditCardAmount)})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Cartão Débito"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:g(r.debitCardAmount)})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Transferência"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:g(r.transferAmount)})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Outros"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:g(r.otherAmount)})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Movimentações de Caixa"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-400 mb-1",children:"Sangrias"}),e.jsx("p",{className:"text-xl font-bold text-orange-600",children:g(r.withdrawals)})]}),e.jsx(z,{className:"w-8 h-8 text-orange-600"})]})}),e.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-700 dark:text-green-400 mb-1",children:"Reforços"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:g(r.deposits)})]}),e.jsx(L,{className:"w-8 h-8 text-green-600"})]})})]})]}),r.notes&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2",children:"Observações"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:r.notes})]}),M&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>h(!1)}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Fechar Caixa"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Dinheiro"}),e.jsx("input",{type:"number",value:n.cashAmount,onChange:t=>o(d=>({...d,cashAmount:Number(t.target.value)})),className:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"PIX"}),e.jsx("input",{type:"number",value:n.pixAmount,onChange:t=>o(d=>({...d,pixAmount:Number(t.target.value)})),className:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cartão Crédito"}),e.jsx("input",{type:"number",value:n.creditCardAmount,onChange:t=>o(d=>({...d,creditCardAmount:Number(t.target.value)})),className:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cartão Débito"}),e.jsx("input",{type:"number",value:n.debitCardAmount,onChange:t=>o(d=>({...d,debitCardAmount:Number(t.target.value)})),className:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Transferência"}),e.jsx("input",{type:"number",value:n.transferAmount,onChange:t=>o(d=>({...d,transferAmount:Number(t.target.value)})),className:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Outros"}),e.jsx("input",{type:"number",value:n.otherAmount,onChange:t=>o(d=>({...d,otherAmount:Number(t.target.value)})),className:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm",step:"0.01"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Observações"}),e.jsx("textarea",{value:n.notes,onChange:t=>o(d=>({...d,notes:t.target.value})),rows:3,className:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[e.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Cancelar"}),e.jsx("button",{onClick:a,className:"px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-md hover:bg-red-700",children:"Fechar Caixa"})]})]})]})}),y&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>j(!1)}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Registrar Sangria"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Valor"}),e.jsx("input",{type:"number",value:f,onChange:t=>N(t.target.value),className:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm",step:"0.01",min:"0"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Motivo (opcional)"}),e.jsx("textarea",{value:k,onChange:t=>v(t.target.value),rows:3,className:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[e.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Cancelar"}),e.jsx("button",{onClick:u,className:"px-4 py-2 bg-orange-600 text-white text-sm font-medium rounded-md hover:bg-orange-700",children:"Registrar Sangria"})]})]})]})}),s&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>i(!1)}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Registrar Reforço"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Valor"}),e.jsx("input",{type:"number",value:f,onChange:t=>N(t.target.value),className:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm",step:"0.01",min:"0"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Motivo (opcional)"}),e.jsx("textarea",{value:k,onChange:t=>v(t.target.value),rows:3,className:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[e.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Cancelar"}),e.jsx("button",{onClick:B,className:"px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700",children:"Registrar Reforço"})]})]})]})})]}):e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"text-center py-12",children:[e.jsx(X,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Caixa não aberto"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"Abra o caixa para começar a registrar movimentações do dia."}),e.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"Abrir Caixa"]})]}),S&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>p(!1)}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Abrir Caixa"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Saldo Inicial"}),e.jsx("input",{type:"number",value:x,onChange:t=>C(t.target.value),className:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500",step:"0.01",min:"0"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[e.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Cancelar"}),e.jsx("button",{onClick:A,className:"px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700",children:"Abrir Caixa"})]})]})]})})]})}function Y(){const[r,m]=l.useState([]),[R,w]=l.useState(!0),[S,p]=l.useState(!1),[M,h]=l.useState(!1),[y,j]=l.useState(null),[s,i]=l.useState({cashAmount:0,pixAmount:0,creditCardAmount:0,debitCardAmount:0,transferAmount:0,otherAmount:0,notes:""}),[x,C]=l.useState({search:"",dateFrom:"",dateTo:"",status:""});l.useEffect(()=>{n()},[]);const n=async()=>{try{w(!0);const a=await b.getCashFlows({dateFrom:x.dateFrom||void 0,dateTo:x.dateTo||void 0,isClosed:x.status==="fechado"?!0:x.status==="aberto"?!1:void 0});m(a)}catch(a){c.error("Erro ao carregar histórico: "+a.message)}finally{w(!1)}},o=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a),f=a=>new Date(a).toLocaleDateString("pt-BR"),N=a=>new Date(a).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),k=a=>{j(a),i({cashAmount:0,pixAmount:0,creditCardAmount:0,debitCardAmount:0,transferAmount:0,otherAmount:0,notes:""}),h(!0)},v=async()=>{if(y)try{const a=s.cashAmount+s.pixAmount+s.creditCardAmount+s.debitCardAmount+s.transferAmount+s.otherAmount;await b.closeCashFlow(y.id,{...s,closingBalance:a}),h(!1),j(null),c.success("Caixa fechado com sucesso!"),n()}catch(a){c.error("Erro ao fechar caixa: "+a.message)}},T=a=>a?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200",children:"Fechado"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200",children:"Aberto"}),A=r.filter(a=>!(x.search&&!a.date.includes(x.search)));return R?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Histórico de Caixas"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[A.length," registro(s) encontrado(s)"]})]}),e.jsxs("button",{onClick:()=>p(!S),className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800",children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Filtros"]})]}),S&&e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Buscar Data"}),e.jsxs("div",{className:"relative",children:[e.jsx(J,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:x.search,onChange:a=>C(u=>({...u,search:a.target.value})),placeholder:"DD/MM/AAAA",className:"pl-10 w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Data Início"}),e.jsx("input",{type:"date",value:x.dateFrom,onChange:a=>C(u=>({...u,dateFrom:a.target.value})),className:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Data Fim"}),e.jsx("input",{type:"date",value:x.dateTo,onChange:a=>C(u=>({...u,dateTo:a.target.value})),className:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:n,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Aplicar"})})]})}),e.jsx("div",{className:"space-y-3",children:A.length===0?e.jsxs("div",{className:"card text-center py-12",children:[e.jsx(D,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Nenhum caixa encontrado"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Altere os filtros ou aguarde a abertura de novos caixas"})]}):A.map(a=>{var u,B;return e.jsx("div",{className:"card hover:shadow-lg transition-shadow",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(D,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:f(a.date)}),T(a.isClosed),!a.isClosed&&e.jsxs("button",{onClick:()=>k(a),className:"ml-auto px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm font-medium flex items-center gap-2",children:[e.jsx(F,{className:"w-4 h-4"}),"Fechar Caixa"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(H,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Abertura"})]}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:o(a.openingBalance)}),a.openedAt&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[N(a.openedAt)," - ",((u=a.openedBy)==null?void 0:u.name)||"N/A"]})]}),a.isClosed&&a.closingBalance!==null&&e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(F,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Fechamento"})]}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:o(a.closingBalance)}),a.closedAt&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[N(a.closedAt)," - ",((B=a.closedBy)==null?void 0:B.name)||"N/A"]})]}),a.isClosed&&a.closingBalance!==null&&e.jsxs("div",{className:`p-3 rounded-lg ${a.closingBalance>=a.openingBalance?"bg-green-50 dark:bg-green-900/20":"bg-red-50 dark:bg-red-900/20"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx($,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Saldo"})]}),e.jsx("p",{className:`text-lg font-bold ${a.closingBalance>=a.openingBalance?"text-green-600":"text-red-600"}`,children:o(a.closingBalance-a.openingBalance)})]})]})]})})},a.id)})}),M&&y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["Fechar Caixa - ",f(y.date)]}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600",children:"×"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Dinheiro"}),e.jsx("input",{type:"number",step:"0.01",value:s.cashAmount,onChange:a=>i({...s,cashAmount:Number(a.target.value)}),className:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"PIX"}),e.jsx("input",{type:"number",step:"0.01",value:s.pixAmount,onChange:a=>i({...s,pixAmount:Number(a.target.value)}),className:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cartão de Crédito"}),e.jsx("input",{type:"number",step:"0.01",value:s.creditCardAmount,onChange:a=>i({...s,creditCardAmount:Number(a.target.value)}),className:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cartão de Débito"}),e.jsx("input",{type:"number",step:"0.01",value:s.debitCardAmount,onChange:a=>i({...s,debitCardAmount:Number(a.target.value)}),className:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Transferência"}),e.jsx("input",{type:"number",step:"0.01",value:s.transferAmount,onChange:a=>i({...s,transferAmount:Number(a.target.value)}),className:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Outros"}),e.jsx("input",{type:"number",step:"0.01",value:s.otherAmount,onChange:a=>i({...s,otherAmount:Number(a.target.value)}),className:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Observações"}),e.jsx("textarea",{value:s.notes,onChange:a=>i({...s,notes:a.target.value}),rows:3,className:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm"})]}),e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Saldo de Abertura:"}),e.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:o(y.openingBalance)})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Saldo de Fechamento:"}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:o(s.cashAmount+s.pixAmount+s.creditCardAmount+s.debitCardAmount+s.transferAmount+s.otherAmount)})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>h(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancelar"}),e.jsx("button",{onClick:v,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Fechar Caixa"})]})]})]})})]})}function te(){const[r,m]=l.useState("today");return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{onClick:()=>m("today"),className:`py-3 px-1 border-b-2 font-medium text-sm inline-flex items-center ${r==="today"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Caixa do Dia"]}),e.jsxs("button",{onClick:()=>m("history"),className:`py-3 px-1 border-b-2 font-medium text-sm inline-flex items-center ${r==="history"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Histórico"]})]})}),r==="today"&&e.jsx(Q,{}),r==="history"&&e.jsx(Y,{})]})}export{te as default};
