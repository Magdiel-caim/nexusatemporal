import{j as e}from"./data-vendor-DkslvP0H.js";import{r as s}from"./react-vendor-C5Agepg6.js";import{s as l}from"./index-DNdWYF4P.js";import{z as C,ab as F,ai as A,D as S}from"./ui-vendor-CNf7S7pz.js";import{R as i,p as D,l as c,X as h,Y as g,T as n,n as R,q as m,B as E,o as B,P as M,r as P,s as U}from"./PieChart-BIrgImlc.js";const y=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"];function q(){const[u,x]=s.useState(!0),[p,b]=s.useState([]),[j,k]=s.useState([]),[o,f]=s.useState([]);s.useEffect(()=>{N()},[]);const N=async()=>{try{x(!0);const[t,r,a]=await Promise.all([l.getMovementsMonthly(6),l.getMostUsedProducts(10),l.getStockValueByCategory()]),w=v(t.data);b(w),k(r.data||[]),f(a.data||[])}catch(t){console.error("Erro ao carregar relatórios:",t),C.error("Erro ao carregar relatórios")}finally{x(!1)}},v=t=>{const r={};return t.forEach(a=>{r[a.month]||(r[a.month]={month:a.month,ENTRADA:0,SAIDA:0}),r[a.month][a.type]=parseInt(a.total_quantity)}),Object.values(r).reverse()},d=t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t);return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-100 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Relatórios e Análises"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Visualize dados agregados e tendências do estoque"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(F,{className:"h-6 w-6 text-blue-600 dark:text-blue-400 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Movimentações Mensais (Últimos 6 Meses)"})]}),e.jsx(i,{width:"100%",height:300,children:e.jsxs(D,{data:p,children:[e.jsx(c,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(h,{dataKey:"month",stroke:"#9CA3AF"}),e.jsx(g,{stroke:"#9CA3AF"}),e.jsx(n,{contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",borderRadius:"8px"},labelStyle:{color:"#F3F4F6"}}),e.jsx(R,{}),e.jsx(m,{type:"monotone",dataKey:"ENTRADA",stroke:"#10B981",strokeWidth:2,name:"Entradas"}),e.jsx(m,{type:"monotone",dataKey:"SAIDA",stroke:"#EF4444",strokeWidth:2,name:"Saídas"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(A,{className:"h-6 w-6 text-purple-600 dark:text-purple-400 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Top 10 Produtos Mais Usados"})]}),e.jsx(i,{width:"100%",height:300,children:e.jsxs(E,{data:j,layout:"vertical",children:[e.jsx(c,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(h,{type:"number",stroke:"#9CA3AF"}),e.jsx(g,{type:"category",dataKey:"name",width:150,stroke:"#9CA3AF"}),e.jsx(n,{contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",borderRadius:"8px"},labelStyle:{color:"#F3F4F6"}}),e.jsx(B,{dataKey:"total_output",fill:"#8B5CF6",name:"Quantidade Usada"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(S,{className:"h-6 w-6 text-green-600 dark:text-green-400 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Valor do Estoque por Categoria"})]}),e.jsx(i,{width:"100%",height:300,children:e.jsxs(M,{children:[e.jsx(P,{data:o,dataKey:"total_value",nameKey:"category",cx:"50%",cy:"50%",outerRadius:100,label:t=>`${t.category}: ${d(t.total_value)}`,children:o.map((t,r)=>e.jsx(U,{fill:y[r%y.length]},`cell-${r}`))}),e.jsx(n,{formatter:t=>d(t),contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",borderRadius:"8px"},labelStyle:{color:"#F3F4F6"}})]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Detalhamento por Categoria"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Categoria"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Produtos"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Unidades"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Valor Total"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:o.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 dark:text-white",children:t.category}),e.jsx("td",{className:"px-6 py-4 text-sm text-right text-gray-500 dark:text-gray-400",children:t.product_count}),e.jsx("td",{className:"px-6 py-4 text-sm text-right text-gray-500 dark:text-gray-400",children:Math.round(t.total_units)}),e.jsx("td",{className:"px-6 py-4 text-sm text-right font-medium text-green-600 dark:text-green-400",children:d(t.total_value)})]},t.category))})]})})]})]})}export{q as default};
